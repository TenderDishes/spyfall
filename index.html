<!DOCTYPE html>
<!-- https://github.com/TenderDishes/spyfall -->
<html lang="de">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>SPY_WIP</title>
        <link rel="stylesheet" type="text/css" href="css/index.css" />
    </head>
    <body>
        <!-- using a custom element -->
        <bluetac-loading-overlay>
            Loading...
        </bluetac-loading-overlay>

        <!-- load all custom elements -->
        <script src="js/customElements/BlueTac/locationGrid.js"></script>
        <script src="js/customElements/BlueTac/startScreen.js"></script>
        <script src="js/customElements/BlueTac/loadingOverlay.js"></script>
        <script src="js/customElements/BlueTac/roleAssignment.js"></script>
        <script src="js/customElements/BlueTac/gameRunning.js"></script>
        <script src="js/customElements/BlueTac/endScreen.js"></script>
        <script src="js/customElements/BlueTac/message.js"></script>
        <script src="js/gameRoutine.js"></script>

        <script type="text/javascript">
            'use strict';

            /*
            helper class for logging
            */
            class Logger {
                constructor(mode) {
                    this.mode = mode;
                }

                error(variable) {
                    console.error(variable);
                    let message = document.body.appendChild(document.createElement('bluetac-message'));
                    message.setAttribute('type','error');
                    message.innerHTML = variable;
                }

                log(variable) {
                    if (this.mode === 'debug') {
                        console.log(variable);
                    }
                }
            }
            var logger = new Logger('debug');

            //get current URL and remove unnecessary symbols
            const URL = document.URL.replace('index.html','').replace('#','');

            let Game = new GameRoutine(URL);

            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function () {
                    navigator.serviceWorker.register(URL+'sw.js', {
                        scope: URL
                    }).then(registration => {
                        console.log("Service Worker registration completed ...");
                    });
                });
            }
        </script>
    </body>
</html>
